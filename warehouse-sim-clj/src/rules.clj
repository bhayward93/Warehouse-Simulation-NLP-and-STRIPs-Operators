(ns rules
  (:require [cgsx.tools.matcher :refer :all]
            [clojure.math.combinatorics :as combinatorics]
            [nl-injector :refer :all]
            )
  )


;A defined rule set
(def rule-set
  '( (rule 1 (connects (?x ?y) (?dx ?dy))
           :=> (connects (?dx ?dy) (?x ?y))
               (is floor (?dx ?dy))) ;Mirroring the connection statements

     ))


(def dyn-rules
  '((rule 1  ;(on (6 0) (forklift 201))
             ;(on (?x ?y) (forklift ?n))
             ;(connects (?ox ?oy) (?dx1 ?dy1))
             ;(connects (?ox ?oy) (?dx2 ?dy2))
             ;(connects (?ox ?oy) (?dx3 ?dy3))
             (connects (?ox ?oy) (?dx4 ?dy4))
             (goal (?gx ?gy) (?forklift ?n))
             ;(:guard (println ("ox" (? ox) )
             ;                 ("dx1" (? dx1))
             ;                 ("dx2" (? dx2))
             ;                 ("dx3" (? dx3))
 ;                             ("dx4" (? dx4))
;

           ;  (:guard (or
            ;           (< (-
            ;               (? gx)
            ;               (? dx1)
            ;             )
            ;             (-
            ;               (? gx)
            ;               (? ox)
            ;            ))
            ;           (<
            ;             (-
            ;               (? gy)
            ;               (? dy1)
            ;             )
            ;             (-
            ;             (? gy)
            ;             (? oy)
            ;    ))))
          :=>
          (issorted ?gx ?dy)
                       )))





;
;(def dyn-rules
;  (let [x ?x]
;  '(rule 1
;         (on (?x ?y) (?forklift ?n))
;         :=>
;         (adjacent ~(+ x 1 )))))
;
;(defn closest-direction-to-goal [state goal]
;  )
;
;(def directional-conflict-resolver '((rule 1 )
;                                           :=> (adjacent-patch)))
;
;
;
;








;The below are slight modifications of Dr Ian Wood/Simon Lynch's functions.

;Applies a singular rules
(defmatch apply-single-rule [facts]
          ((rule ?n ??ante :=> ??cons)   ;Destructuring the rule.
            :=> (mfor* [(? ante) facts]
                       (mout (? cons))
                       ))) ;out the consequents.)

;Applies all rules
(defn apply-all-rules [rules facts]
  (reduce concat ;concats the output from the map anon function below.
          (map #(apply-single-rule % facts) rules)
          ))


;Forward chaining to apply the rules
(defn fwd-chain [rules facts]
  (let [new-facts (apply-all-rules rules facts)]
    (if (clojure.set/subset? new-facts facts)
      facts
      (recur rules (clojure.set/union facts new-facts))
      )))

;((on (7 0) (forklift 201)))(() (goal (9 0) (forklift 495)) (at (4 13) grates-crate 192) (adjacent (forklift 201) (7 0)) (at (4 13) wheels-crate 199) (at (12 12) tyres-crate 183) (adjacent (forklift 201) (6 1)) (at (12 10) girders-crate 184) (at (12 13) circular-saws-crate 197) (at (8 2) engines-crate 189) (at (12 6) nails-crate 190) (at (12 10) jacks-crate 188) (at (8 4) lights-crate 194) (at (8 3) lights-crate 187) (at (12 15) pistons-crate 198) (at (12 1) lights-crate 186) (adjacent (forklift 201) (6 16)) (at (12 3) girders-crate 195) (at (4 13) circular-saws-crate 180) (at (12 14) jacks-crate 200) (adjacent (forklift 201) (5 0)) (at (8 13) bolts-crate 185) (at (12 5) wheels-crate 191) (at (12 1) wooden-planks-crate 196) (at (4 11) bolts-crate 182) (at (4 10) grates-crate 181) (on (6 0) (forklift 201)) (isa forklift (forklift 201)) (at (12 3) wheels-crate 193))


(def goal-state '((goal (7 0) (forklift 201)) (at (4 13) grates-crate 192) (adjacent (forklift 201) (7 0)) (at (4 13) wheels-crate 199) (at (12 12) tyres-crate 183) (adjacent (forklift 201) (6 1)) (at (12 10) girders-crate 184) (at (12 13) circular-saws-crate 197) (at (8 2) engines-crate 189) (at (12 6) nails-crate 190) (at (12 10) jacks-crate 188) (at (8 4) lights-crate 194) (at (8 3) lights-crate 187) (at (12 15) pistons-crate 198) (at (12 1) lights-crate 186) (adjacent (forklift 201) (6 16)) (at (12 3) girders-crate 195) (at (4 13) circular-saws-crate 180) (at (12 14) jacks-crate 200) (adjacent (forklift 201) (5 0)) (at (8 13) bolts-crate 185) (at (12 5) wheels-crate 191) (at (12 1) wooden-planks-crate 196) (at (4 11) bolts-crate 182) (at (4 10) grates-crate 181) (on (6 0) (forklift 201)) (isa forklift (forklift 201)) (at (12 3) wheels-crate 193)))
(def pre-app '((is floor (9 3)) (connects (9 3) (8 3)) (is floor (3 8)) (connects (3 8) (4 8)) (is floor (13 5)) (connects (13 5) (14 5)) (is floor (12 13)) (connects (12 13) (12 14)) (is floor (5 14)) (connects (5 14) (6 14)) (is floor (3 13)) (connects (3 13) (2 13)) (is floor (6 15)) (connects (6 15) (6 14)) (is floor (1 8)) (connects (1 8) (2 8)) (is floor (2 11)) (connects (2 11) (2 10)) (is floor (15 5)) (connects (15 5) (14 5)) (is floor (15 0)) (connects (15 0) (14 0)) (is floor (4 3)) (connects (4 3) (4 4)) (is floor (0 5)) (connects (0 5) (16 5)) (is floor (5 8)) (connects (5 8) (4 8)) (is floor (15 13)) (connects (15 13) (14 13)) (is floor (7 12)) (connects (7 12) (8 12)) (is floor (2 13)) (connects (2 13) (2 14)) (is floor (5 16)) (connects (5 16) (4 16)) (is floor (15 0)) (connects (15 0) (16 0)) (is floor (16 15)) (connects (16 15) (0 15)) (is floor (6 5)) (connects (6 5) (6 4)) (is floor (15 12)) (connects (15 12) (14 12)) (is floor (4 11)) (connects (4 11) (4 10)) (is floor (0 1)) (connects (0 1) (0 2)) (is floor (13 2)) (connects (13 2) (12 2)) (is floor (15 4)) (connects (15 4) (16 4)) (is floor (10 7)) (connects (10 7) (10 8)) (is floor (13 10)) (connects (13 10) (14 10)) (is floor (1 4)) (connects (1 4) (2 4)) (is floor (2 11)) (connects (2 11) (2 12)) (is floor (15 6)) (connects (15 6) (16 6)) (is floor (7 0)) (connects (7 0) (6 0)) (is floor (11 9)) (connects (11 9) (12 9)) (is floor (8 13)) (connects (8 13) (8 12)) (is floor (1 14)) (connects (1 14) (2 14)) (is floor (14 5)) (connects (14 5) (14 6)) (is floor (7 1)) (connects (7 1) (8 1)) (is floor (15 10)) (connects (15 10) (16 10)) (is floor (15 5)) (connects (15 5) (16 5)) (is floor (13 16)) (connects (13 16) (12 16)) (is floor (9 7)) (connects (9 7) (10 7)) (is floor (13 4)) (connects (13 4) (14 4)) (is floor (2 7)) (connects (2 7) (2 8)) (is floor (6 9)) (connects (6 9) (6 8)) (is floor (5 1)) (connects (5 1) (6 1)) (is floor (4 5)) (connects (4 5) (4 4)) (is floor (11 7)) (connects (11 7) (10 7)) (is floor (8 7)) (connects (8 7) (8 8)) (is floor (11 10)) (connects (11 10) (10 10)) (is floor (16 5)) (connects (16 5) (16 4)) (is floor (11 15)) (connects (11 15) (10 15)) (is floor (0 11)) (connects (0 11) (0 10)) (is floor (15 1)) (connects (15 1) (16 1)) (is floor (8 15)) (connects (8 15) (8 14)) (is floor (8 16)) (connects (8 16) (8 0)) (is floor (6 0)) (connects (6 0) (6 16)) (is floor (4 1)) (connects (4 1) (4 2)) (is floor (15 10)) (connects (15 10) (14 10)) (is floor (12 0)) (connects (12 0) (12 16)) (is floor (0 8)) (connects (0 8) (16 8)) (is floor (16 9)) (connects (16 9) (16 10)) (is floor (3 15)) (connects (3 15) (2 15)) (is floor (10 1)) (connects (10 1) (10 0)) (is floor (3 13)) (connects (3 13) (4 13)) (is floor (11 0)) (connects (11 0) (12 0)) (is floor (8 11)) (connects (8 11) (8 10)) (is floor (6 15)) (connects (6 15) (6 16)) (is floor (6 16)) (connects (6 16) (6 0)) (is floor (9 16)) (connects (9 16) (8 16)) (is floor (16 7)) (connects (16 7) (0 7)) (is floor (13 14)) (connects (13 14) (14 14)) (is floor (16 11)) (connects (16 11) (16 12)) (is floor (2 7)) (connects (2 7) (2 6)) (is floor (7 9)) (connects (7 9) (6 9)) (is floor (11 1)) (connects (11 1) (10 1)) (is floor (16 3)) (connects (16 3) (0 3)) (is floor (7 12)) (connects (7 12) (6 12)) (is floor (16 11)) (connects (16 11) (16 10)) (is floor (7 7)) (connects (7 7) (6 7)) (is floor (14 13)) (connects (14 13) (14 14)) (is floor (9 16)) (connects (9 16) (10 16)) (is floor (9 6)) (connects (9 6) (10 6)) (is floor (3 6)) (connects (3 6) (2 6)) (is floor (1 12)) (connects (1 12) (2 12)) (is floor (4 1)) (connects (4 1) (4 0)) (is floor (16 5)) (connects (16 5) (16 6)) (is floor (9 9)) (connects (9 9) (10 9)) (is floor (0 13)) (connects (0 13) (0 14)) (is floor (12 11)) (connects (12 11) (12 10)) (is floor (0 7)) (connects (0 7) (0 8)) (is floor (5 7)) (connects (5 7) (4 7)) (is floor (11 1)) (connects (11 1) (12 1)) (is floor (12 13)) (connects (12 13) (12 12)) (is floor (15 3)) (connects (15 3) (16 3)) (is floor (16 8)) (connects (16 8) (0 8)) (is floor (12 11)) (connects (12 11) (12 12)) (is floor (9 13)) (connects (9 13) (10 13)) (is floor (11 12)) (connects (11 12) (12 12)) (is floor (10 0)) (connects (10 0) (10 16)) (is floor (8 0)) (connects (8 0) (8 16)) (is floor (8 9)) (connects (8 9) (8 10)) (is floor (2 9)) (connects (2 9) (2 8)) (is floor (7 4)) (connects (7 4) (6 4)) (is floor (16 15)) (connects (16 15) (16 14)) (is floor (1 2)) (connects (1 2) (0 2)) (is floor (0 11)) (connects (0 11) (0 12)) (is floor (5 6)) (connects (5 6) (6 6)) (is floor (15 9)) (connects (15 9) (14 9)) (is floor (9 9)) (connects (9 9) (8 9)) (is floor (14 9)) (connects (14 9) (14 10)) (is floor (13 4)) (connects (13 4) (12 4)) (is floor (5 2)) (connects (5 2) (6 2)) (is floor (15 2)) (connects (15 2) (16 2)) (is floor (13 3)) (connects (13 3) (12 3)) (is floor (12 16)) (connects (12 16) (12 0)) (is floor (10 5)) (connects (10 5) (10 6)) (is floor (13 14)) (connects (13 14) (12 14)) (is floor (4 9)) (connects (4 9) (4 10)) (is floor (7 16)) (connects (7 16) (6 16)) (is floor (11 0)) (connects (11 0) (10 0)) (is floor (13 10)) (connects (13 10) (12 10)) (is floor (16 7)) (connects (16 7) (16 8)) (is floor (11 6)) (connects (11 6) (10 6)) (is floor (8 3)) (connects (8 3) (8 4)) (is floor (0 4)) (connects (0 4) (16 4)) (is floor (5 6)) (connects (5 6) (4 6)) (is floor (2 3)) (connects (2 3) (2 4)) (is floor (16 10)) (connects (16 10) (0 10)) (is floor (5 7)) (connects (5 7) (6 7)) (is floor (5 10)) (connects (5 10) (4 10)) (is floor (7 10)) (connects (7 10) (6 10)) (is floor (9 4)) (connects (9 4) (8 4)) (is floor (10 9)) (connects (10 9) (10 10)) (is floor (11 14)) (connects (11 14) (10 14)) (is floor (1 10)) (connects (1 10) (2 10)) (is floor (14 11)) (connects (14 11) (14 10)) (is floor (9 14)) (connects (9 14) (10 14)) (is floor (1 3)) (connects (1 3) (0 3)) (is floor (4 13)) (connects (4 13) (4 14)) (is floor (5 4)) (connects (5 4) (4 4)) (is floor (7 8)) (connects (7 8) (8 8)) (is floor (0 13)) (connects (0 13) (16 13)) (is floor (6 3)) (connects (6 3) (6 2)) (is floor (0 13)) (connects (0 13) (0 12)) (is floor (9 7)) (connects (9 7) (8 7)) (is floor (7 5)) (connects (7 5) (8 5)) (is floor (3 1)) (connects (3 1) (2 1)) (is floor (7 2)) (connects (7 2) (6 2)) (is floor (8 15)) (connects (8 15) (8 16)) (is floor (16 1)) (connects (16 1) (16 2)) (is floor (16 0)) (connects (16 0) (0 0)) (is floor (0 2)) (connects (0 2) (16 2)) (is floor (3 14)) (connects (3 14) (4 14)) (is floor (0 5)) (connects (0 5) (0 4)) (is floor (3 6)) (connects (3 6) (4 6)) (is floor (3 5)) (connects (3 5) (2 5)) (is floor (3 3)) (connects (3 3) (4 3)) (is floor (1 1)) (connects (1 1) (2 1)) (is floor (7 3)) (connects (7 3) (6 3)) (is floor (6 13)) (connects (6 13) (6 14)) (is floor (14 9)) (connects (14 9) (14 8)) (is floor (1 13)) (connects (1 13) (2 13)) (is floor (0 14)) (connects (0 14) (16 14)) (is floor (11 15)) (connects (11 15) (12 15)) (is floor (14 7)) (connects (14 7) (14 6)) (is floor (14 13)) (connects (14 13) (14 12)) (is floor (7 15)) (connects (7 15) (6 15)) (is floor (11 10)) (connects (11 10) (12 10)) (is floor (1 1)) (connects (1 1) (0 1)) (is floor (5 13)) (connects (5 13) (4 13)) (is floor (14 7)) (connects (14 7) (14 8)) (is floor (6 3)) (connects (6 3) (6 4)) (is floor (5 3)) (connects (5 3) (6 3)) (is floor (16 13)) (connects (16 13) (16 14)) (is floor (0 15)) (connects (0 15) (16 15)) (is floor (3 10)) (connects (3 10) (2 10)) (is floor (16 7)) (connects (16 7) (16 6)) (is floor (6 7)) (connects (6 7) (6 8)) (is floor (4 7)) (connects (4 7) (4 8)) (is floor (1 7)) (connects (1 7) (2 7)) (is floor (10 3)) (connects (10 3) (10 2)) (is floor (10 15)) (connects (10 15) (10 14)) (is floor (5 10)) (connects (5 10) (6 10)) (is floor (10 9)) (connects (10 9) (10 8)) (is floor (11 11)) (connects (11 11) (12 11)) (is floor (16 3)) (connects (16 3) (16 2)) (is floor (5 11)) (connects (5 11) (4 11)) (is floor (10 16)) (connects (10 16) (10 0)) (is floor (5 0)) (connects (5 0) (4 0)) (is floor (9 4)) (connects (9 4) (10 4)) (is floor (4 5)) (connects (4 5) (4 6)) (is floor (5 15)) (connects (5 15) (4 15)) (is floor (0 9)) (connects (0 9) (16 9)) (is floor (3 10)) (connects (3 10) (4 10)) (is floor (15 12)) (connects (15 12) (16 12)) (is floor (11 12)) (connects (11 12) (10 12)) (is floor (5 11)) (connects (5 11) (6 11)) (is floor (9 10)) (connects (9 10) (8 10)) (is floor (5 5)) (connects (5 5) (6 5)) (is floor (2 16)) (connects (2 16) (2 0)) (is floor (1 5)) (connects (1 5) (0 5)) (is floor (3 8)) (connects (3 8) (2 8)) (is floor (11 8)) (connects (11 8) (12 8)) (is floor (6 11)) (connects (6 11) (6 12)) (is floor (12 15)) (connects (12 15) (12 14)) (is floor (9 0)) (connects (9 0) (10 0)) (is floor (8 1)) (connects (8 1) (8 2)) (is floor (16 14)) (connects (16 14) (0 14)) (is floor (3 16)) (connects (3 16) (2 16)) (is floor (14 3)) (connects (14 3) (14 2)) (is floor (11 16)) (connects (11 16) (10 16)) (is floor (7 13)) (connects (7 13) (6 13)) (is floor (1 6)) (connects (1 6) (2 6)) (is floor (16 1)) (connects (16 1) (16 0)) (is floor (4 15)) (connects (4 15) (4 14)) (is floor (4 9)) (connects (4 9) (4 8)) (is floor (13 15)) (connects (13 15) (12 15)) (is floor (9 12)) (connects (9 12) (8 12)) (is floor (5 1)) (connects (5 1) (4 1)) (is floor (5 9)) (connects (5 9) (6 9)) (is floor (5 5)) (connects (5 5) (4 5)) (is floor (0 16)) (connects (0 16) (16 16)) (is floor (5 3)) (connects (5 3) (4 3)) (is floor (16 13)) (connects (16 13) (0 13)) (is floor (7 7)) (connects (7 7) (8 7)) (is floor (15 7)) (connects (15 7) (16 7)) (is floor (15 16)) (connects (15 16) (14 16)) (is floor (15 8)) (connects (15 8) (14 8)) (is floor (0 9)) (connects (0 9) (0 8)) (is floor (3 9)) (connects (3 9) (2 9)) (is floor (16 11)) (connects (16 11) (0 11)) (is floor (1 14)) (connects (1 14) (0 14)) (is floor (4 13)) (connects (4 13) (4 12)) (is floor (6 13)) (connects (6 13) (6 12)) (is floor (16 4)) (connects (16 4) (0 4)) (is floor (8 9)) (connects (8 9) (8 8)) (is floor (3 5)) (connects (3 5) (4 5)) (is floor (7 1)) (connects (7 1) (6 1)) (is floor (13 11)) (connects (13 11) (12 11)) (is floor (3 15)) (connects (3 15) (4 15)) (is floor (13 0)) (connects (13 0) (14 0)) (is floor (7 8)) (connects (7 8) (6 8)) (is floor (13 9)) (connects (13 9) (14 9)) (is floor (13 12)) (connects (13 12) (14 12)) (is floor (7 5)) (connects (7 5) (6 5)) (is floor (3 2)) (connects (3 2) (2 2)) (is floor (16 6)) (connects (16 6) (0 6)) (is floor (9 1)) (connects (9 1) (8 1)) (is floor (7 4)) (connects (7 4) (8 4)) (is floor (11 13)) (connects (11 13) (10 13)) (is floor (6 11)) (connects (6 11) (6 10)) (is floor (3 2)) (connects (3 2) (4 2)) (is floor (3 14)) (connects (3 14) (2 14)) (is floor (1 2)) (connects (1 2) (2 2)) (is floor (7 11)) (connects (7 11) (6 11)) (is floor (1 15)) (connects (1 15) (0 15)) (is floor (11 11)) (connects (11 11) (10 11)) (is floor (12 9)) (connects (12 9) (12 8)) (is floor (10 3)) (connects (10 3) (10 4)) (is floor (15 13)) (connects (15 13) (16 13)) (is floor (13 3)) (connects (13 3) (14 3)) (is floor (6 1)) (connects (6 1) (6 2)) (is floor (9 6)) (connects (9 6) (8 6)) (is floor (6 9)) (connects (6 9) (6 10)) (is floor (9 15)) (connects (9 15) (8 15)) (is floor (1 15)) (connects (1 15) (2 15)) (is floor (13 2)) (connects (13 2) (14 2)) (is floor (10 11)) (connects (10 11) (10 12)) (is floor (12 9)) (connects (12 9) (12 10)) (is floor (14 0)) (connects (14 0) (14 16)) (is floor (15 14)) (connects (15 14) (16 14)) (is floor (14 3)) (connects (14 3) (14 4)) (is floor (3 7)) (connects (3 7) (4 7)) (is floor (2 5)) (connects (2 5) (2 4)) (is floor (2 3)) (connects (2 3) (2 2)) (is floor (11 14)) (connects (11 14) (12 14)) (is floor (9 8)) (connects (9 8) (10 8)) (is floor (6 1)) (connects (6 1) (6 0)) (is floor (11 3)) (connects (11 3) (10 3)) (is floor (16 13)) (connects (16 13) (16 12)) (is floor (5 13)) (connects (5 13) (6 13)) (is floor (1 4)) (connects (1 4) (0 4)) (is floor (1 9)) (connects (1 9) (0 9)) (is floor (9 10)) (connects (9 10) (10 10)) (is floor (11 3)) (connects (11 3) (12 3)) (is floor (1 7)) (connects (1 7) (0 7)) (is floor (2 15)) (connects (2 15) (2 16)) (is floor (11 16)) (connects (11 16) (12 16)) (is floor (16 2)) (connects (16 2) (0 2)) (is floor (8 11)) (connects (8 11) (8 12)) (is floor (7 6)) (connects (7 6) (6 6)) (is floor (0 16)) (connects (0 16) (0 0)) (is floor (7 15)) (connects (7 15) (8 15)) (is floor (9 11)) (connects (9 11) (8 11)) (is floor (4 3)) (connects (4 3) (4 2)) (is floor (1 8)) (connects (1 8) (0 8)) (is floor (3 3)) (connects (3 3) (2 3)) (is floor (1 13)) (connects (1 13) (0 13)) (is floor (12 15)) (connects (12 15) (12 16)) (is floor (16 9)) (connects (16 9) (16 8)) (is floor (11 7)) (connects (11 7) (12 7)) (is floor (3 4)) (connects (3 4) (2 4)) (is floor (13 6)) (connects (13 6) (14 6)) (is floor (15 11)) (connects (15 11) (16 11)) (is floor (15 6)) (connects (15 6) (14 6)) (is floor (9 15)) (connects (9 15) (10 15)) (is floor (10 5)) (connects (10 5) (10 4)) (is floor (15 8)) (connects (15 8) (16 8)) (is floor (12 1)) (connects (12 1) (12 2)) (is floor (13 7)) (connects (13 7) (12 7)) (is floor (10 15)) (connects (10 15) (10 16)) (is floor (11 5)) (connects (11 5) (10 5)) (is floor (0 9)) (connects (0 9) (0 10)) (is floor (1 16)) (connects (1 16) (2 16)) (is floor (9 12)) (connects (9 12) (10 12)) (is floor (7 6)) (connects (7 6) (8 6)) (is floor (7 13)) (connects (7 13) (8 13)) (is floor (1 16)) (connects (1 16) (0 16)) (is floor (11 4)) (connects (11 4) (12 4)) (is floor (0 7)) (connects (0 7) (0 6)) (is floor (9 11)) (connects (9 11) (10 11)) (is floor (2 5)) (connects (2 5) (2 6)) (is floor (14 5)) (connects (14 5) (14 4)) (is floor (13 15)) (connects (13 15) (14 15)) (is floor (1 0)) (connects (1 0) (0 0)) (is floor (12 1)) (connects (12 1) (12 0)) (is floor (7 3)) (connects (7 3) (8 3)) (is floor (15 7)) (connects (15 7) (14 7)) (is floor (1 3)) (connects (1 3) (2 3)) (is floor (0 3)) (connects (0 3) (0 2)) (is floor (13 13)) (connects (13 13) (14 13)) (is floor (7 9)) (connects (7 9) (8 9)) (is floor (4 15)) (connects (4 15) (4 16)) (is floor (9 5)) (connects (9 5) (8 5)) (is floor (0 11)) (connects (0 11) (16 11)) (is floor (2 1)) (connects (2 1) (2 0)) (is floor (4 11)) (connects (4 11) (4 12)) (is floor (13 8)) (connects (13 8) (12 8)) (is floor (9 0)) (connects (9 0) (8 0)) (is floor (1 10)) (connects (1 10) (0 10)) (is floor (9 13)) (connects (9 13) (8 13)) (is floor (7 0)) (connects (7 0) (8 0)) (is floor (13 13)) (connects (13 13) (12 13)) (is floor (0 15)) (connects (0 15) (0 14)) (is floor (2 1)) (connects (2 1) (2 2)) (is floor (16 16)) (connects (16 16) (0 16)) (is floor (10 13)) (connects (10 13) (10 12)) (is floor (4 7)) (connects (4 7) (4 6)) (is floor (9 8)) (connects (9 8) (8 8)) (is floor (1 0)) (connects (1 0) (2 0)) (is floor (14 1)) (connects (14 1) (14 2)) (is floor (13 1)) (connects (13 1) (14 1)) (is floor (15 14)) (connects (15 14) (14 14)) (is floor (8 7)) (connects (8 7) (8 6)) (is floor (0 12)) (connects (0 12) (16 12)) (is floor (11 2)) (connects (11 2) (10 2)) (is floor (1 11)) (connects (1 11) (2 11)) (is floor (13 11)) (connects (13 11) (14 11)) (is floor (5 8)) (connects (5 8) (6 8)) (is floor (11 2)) (connects (11 2) (12 2)) (is floor (10 11)) (connects (10 11) (10 10)) (is floor (8 1)) (connects (8 1) (8 0)) (is floor (7 10)) (connects (7 10) (8 10)) (is floor (2 0)) (connects (2 0) (2 16)) (is floor (2 15)) (connects (2 15) (2 14)) (is floor (15 1)) (connects (15 1) (14 1)) (is floor (5 2)) (connects (5 2) (4 2)) (is floor (13 0)) (connects (13 0) (12 0)) (is floor (3 7)) (connects (3 7) (2 7)) (is floor (1 9)) (connects (1 9) (2 9)) (is floor (5 0)) (connects (5 0) (6 0)) (is floor (5 9)) (connects (5 9) (4 9)) (is floor (7 16)) (connects (7 16) (8 16)) (is floor (0 3)) (connects (0 3) (0 4)) (is floor (16 15)) (connects (16 15) (16 16)) (is floor (4 16)) (connects (4 16) (4 0)) (is floor (3 4)) (connects (3 4) (4 4)) (is floor (7 2)) (connects (7 2) (8 2)) (is floor (15 11)) (connects (15 11) (14 11)) (is floor (16 1)) (connects (16 1) (0 1)) (is floor (8 3)) (connects (8 3) (8 2)) (is floor (15 2)) (connects (15 2) (14 2)) (is floor (3 1)) (connects (3 1) (4 1)) (is floor (15 16)) (connects (15 16) (16 16)) (is floor (8 5)) (connects (8 5) (8 4)) (is floor (15 15)) (connects (15 15) (16 15)) (is floor (6 5)) (connects (6 5) (6 6)) (is floor (10 7)) (connects (10 7) (10 6)) (is floor (5 4)) (connects (5 4) (6 4)) (is floor (15 4)) (connects (15 4) (14 4)) (is floor (3 0)) (connects (3 0) (4 0)) (is floor (11 5)) (connects (11 5) (12 5)) (is floor (1 11)) (connects (1 11) (0 11)) (is floor (8 13)) (connects (8 13) (8 14)) (is floor (15 3)) (connects (15 3) (14 3)) (is floor (9 2)) (connects (9 2) (10 2)) (is floor (8 5)) (connects (8 5) (8 6)) (is floor (11 4)) (connects (11 4) (10 4)) (is floor (16 12)) (connects (16 12) (0 12)) (is floor (9 3)) (connects (9 3) (10 3)) (is floor (10 13)) (connects (10 13) (10 14)) (is floor (5 15)) (connects (5 15) (6 15)) (is floor (0 15)) (connects (0 15) (0 16)) (is floor (0 1)) (connects (0 1) (16 1)) (is floor (5 14)) (connects (5 14) (4 14)) (is floor (12 5)) (connects (12 5) (12 4)) (is floor (13 6)) (connects (13 6) (12 6)) (is floor (3 11)) (connects (3 11) (4 11)) (is floor (2 13)) (connects (2 13) (2 12)) (is floor (0 0)) (connects (0 0) (16 0)) (is floor (14 15)) (connects (14 15) (14 16)) (is floor (3 0)) (connects (3 0) (2 0)) (is floor (15 15)) (connects (15 15) (14 15)) (is floor (3 9)) (connects (3 9) (4 9)) (is floor (16 16)) (connects (16 16) (16 0)) (is floor (9 1)) (connects (9 1) (10 1)) (is floor (0 0)) (connects (0 0) (0 16)) (is floor (4 0)) (connects (4 0) (4 16)) (is floor (7 14)) (connects (7 14) (6 14)) (is floor (11 6)) (connects (11 6) (12 6)) (is floor (0 10)) (connects (0 10) (16 10)) (is floor (16 5)) (connects (16 5) (0 5)) (is floor (1 12)) (connects (1 12) (0 12)) (is floor (5 12)) (connects (5 12) (6 12)) (is floor (1 5)) (connects (1 5) (2 5)) (is floor (16 9)) (connects (16 9) (0 9)) (is floor (13 5)) (connects (13 5) (12 5)) (is floor (13 12)) (connects (13 12) (12 12)) (is floor (5 16)) (connects (5 16) (6 16)) (is floor (9 14)) (connects (9 14) (8 14)) (is floor (16 3)) (connects (16 3) (16 4)) (is floor (12 5)) (connects (12 5) (12 6)) (is floor (11 13)) (connects (11 13) (12 13)) (is floor (12 3)) (connects (12 3) (12 2)) (is floor (2 9)) (connects (2 9) (2 10)) (is floor (9 5)) (connects (9 5) (10 5)) (is floor (14 1)) (connects (14 1) (14 0)) (is floor (13 16)) (connects (13 16) (14 16)) (is floor (3 12)) (connects (3 12) (4 12)) (is floor (0 5)) (connects (0 5) (0 6)) (is floor (16 0)) (connects (16 0) (16 16)) (is floor (11 8)) (connects (11 8) (10 8)) (is floor (13 1)) (connects (13 1) (12 1)) (is floor (10 1)) (connects (10 1) (10 2)) (is floor (0 6)) (connects (0 6) (16 6)) (is floor (3 12)) (connects (3 12) (2 12)) (is floor (0 3)) (connects (0 3) (16 3)) (is floor (14 16)) (connects (14 16) (14 0)) (is floor (5 12)) (connects (5 12) (4 12)) (is floor (14 11)) (connects (14 11) (14 12)) (is floor (13 9)) (connects (13 9) (12 9)) (is floor (14 15)) (connects (14 15) (14 14)) (is floor (6 7)) (connects (6 7) (6 6)) (is floor (12 7)) (connects (12 7) (12 6)) (is floor (7 14)) (connects (7 14) (8 14)) (is floor (13 7)) (connects (13 7) (14 7)) (is floor (9 2)) (connects (9 2) (8 2)) (is floor (12 7)) (connects (12 7) (12 8)) (is floor (7 11)) (connects (7 11) (8 11)) (is floor (12 3)) (connects (12 3) (12 4)) (is floor (13 8)) (connects (13 8) (14 8)) (is floor (1 6)) (connects (1 6) (0 6)) (is floor (15 9)) (connects (15 9) (16 9)) (is floor (0 1)) (connects (0 1) (0 0)) (is floor (11 9)) (connects (11 9) (10 9)) (is floor (3 11)) (connects (3 11) (2 11)) (is floor (0 7)) (connects (0 7) (16 7)) (is floor (3 16)) (connects (3 16) (4 16)) (goal (7 0) (forklift 201)) (at (4 13) grates-crate 192) (adjacent (forklift 201) (7 0)) (at (4 13) wheels-crate 199) (at (12 12) tyres-crate 183) (adjacent (forklift 201) (6 1)) (at (12 10) girders-crate 184) (at (12 13) circular-saws-crate 197) (at (8 2) engines-crate 189) (at (12 6) nails-crate 190) (at (12 10) jacks-crate 188) (at (8 4) lights-crate 194) (at (8 3) lights-crate 187) (at (12 15) pistons-crate 198) (at (12 1) lights-crate 186) (adjacent (forklift 201) (6 16)) (at (12 3) girders-crate 195) (at (4 13) circular-saws-crate 180) (at (12 14) jacks-crate 200) (adjacent (forklift 201) (5 0)) (at (8 13) bolts-crate 185) (at (12 5) wheels-crate 191) (at (12 1) wooden-planks-crate 196) (at (4 11) bolts-crate 182) (at (4 10) grates-crate 181) (on (6 0) (forklift 201)) (isa forklift (forklift 201)) (at (12 3) wheels-crate 193)))
(def dyn-applied '((goal (7 0) (forklift 201)) (at (4 13) grates-crate 192) (adjacent (forklift 201) (7 0)) (at (4 13) wheels-crate 199) (at (12 12) tyres-crate 183) (adjacent (forklift 201) (6 1)) (at (12 10) girders-crate 184) (at (12 13) circular-saws-crate 197) (at (8 2) engines-crate 189) (at (12 6) nails-crate 190) (at (12 10) jacks-crate 188) (at (8 4) lights-crate 194) (at (8 3) lights-crate 187) (at (12 15) pistons-crate 198) (at (12 1) lights-crate 186) (adjacent (forklift 201) (6 16)) (at (12 3) girders-crate 195) (at (4 13) circular-saws-crate 180) (at (12 14) jacks-crate 200) (adjacent (forklift 201) (5 0)) (at (8 13) bolts-crate 185) (at (12 5) wheels-crate 191) (at (12 1) wooden-planks-crate 196) (at (4 11) bolts-crate 182) (at (4 10) grates-crate 181) (on (6 0) (forklift 201)) (isa forklift (forklift 201)) (at (12 3) wheels-crate 193)))